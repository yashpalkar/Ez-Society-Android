mutation RegisterVisitor($contact_no: String!, $guard_id: uuid!, $last_visited_at: timestamptz!, $name: String!, $society_id: uuid!, $verified: Boolean!, $image: String!) {
  insert_society_visitors_one(object: {name: $name, last_visited_at: $last_visited_at, verified: $verified, society_id: $society_id, guard_id: $guard_id, contact_no: $contact_no, image: $image}) {
    id
    last_visited_at
    name
    society_id
    guard_id
    created_at
    contact_no
    updated_at
    verified
    image
  }
}

mutation AddVisitorCheckin($check_in: timestamptz!, $flat_no: String!, $guard_id: uuid!, $is_allowed: String!, $society_id: uuid!, $visitor_id: uuid!) {
  insert_society_visitors_checkin_one(object: {visitor_id: $visitor_id, society_id: $society_id, guard_id: $guard_id, flat_no: $flat_no, check_in: $check_in, is_allowed: $is_allowed}) {
    visitor_id
    id
  }
}


query GetVisitorCheckIn($_eq: uuid!) {
  society_visitors_checkin(where: {society_id: {_eq: $_eq}}) {
    attended_time
    check_in
    flat_no
    guard_id
    id
    is_allowed
    society_id
  }
}

query VisitorListBySocietyId($_eq: uuid!) {
  society_visitors_checkin(where: {society_id: {_eq: $_eq}}) {
    attended_time
    check_in
    check_out
    flat_no
    guard_id
    id
    is_allowed
    society_id
    visitor_id
    society_visitors_checkin_society_visitor {
      contact_no
      image
      name
      verified
      created_at
      guard_id
      id
      last_visited_at
      society_id
      updated_at
    }
  }
}


mutation UpdateCheckVisitor($_eq: uuid!, $_eq1: uuid!, $attended_time: timetz!, $check_out: timestamptz!) {
  update_society_visitors_checkin(where: {id: {_eq: $_eq1}, society_id: {_eq: $_eq}}, _set: {attended_time: $attended_time, check_out: $check_out}) {
    affected_rows
  }
}
